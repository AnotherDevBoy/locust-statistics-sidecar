version: '3'
services:
  standalone:
    image: locustio/locust
    ports:
     - "8089:8089"
    container_name: standalone
    volumes:
    - $PWD/locustfile:/mnt/locust
    environment:
    - LOCUST_MODE=standalone
    - LOCUSTFILE_PATH=/mnt/locust/locustfile.py
    - TARGET_URL=https://www.yahoo.com
  sidecar:
    image: albertowar/locust-newrelic-sidecar
    container_name: sidecar
    environment:
    - STATS_ENDPOINT=http://localhost:8089/stats/requests
    - POLL_INTERVAL_SECONDS=5
